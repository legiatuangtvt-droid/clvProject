.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border-color);
}

.page-header #breadcrumb-container {
    align-items: center;
    font-size: 1.2rem;
    color: var(--text-light);
    flex-wrap: wrap;
}

.breadcrumb-item {
    color: var(--text-light);
    text-decoration: none;
    transition: color 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.breadcrumb-item:hover {
    color: var(--primary-color);
    text-decoration: underline;
}

.breadcrumb-item:last-child {
    color: var(--text-dark);
    font-weight: 600;
    pointer-events: none;
}

/* NEW: Đảm bảo các nút hành động đầu trang luôn nằm trên một hàng */
.page-actions {
    display: flex;
    gap: 10px;
    flex-shrink: 0; /* Ngăn container này bị co lại */
}

.device-table {
    width: 100%;
    border-collapse: collapse; /* Chuyển sang collapse để có đường kẻ liền mạch */
}

.device-table th,
.device-table td {
    padding: 5px 5px;
    text-align: left;
    vertical-align: middle;
    border-bottom: 1px solid var(--border-color); /* Thêm đường kẻ ngang */
    border-right: 1px solid var(--border-color); /* Thêm đường kẻ dọc */
}

.device-table thead th {
    font-weight: 600;
    background-color: #f8f9fa; /* Đồng bộ màu header với các bảng khác */
    color: #475569; /* Màu chữ tối hơn một chút */
    position: sticky; /* Giữ header cố định khi cuộn */
    top: 0;
    z-index: 1;
    text-transform: uppercase; /* Viết hoa tiêu đề */
    font-size: 0.7rem; /* Giảm kích thước chữ tiêu đề */
    letter-spacing: 0.5px; /* Tăng khoảng cách giữa các chữ */
    vertical-align: middle; /* Căn giữa theo chiều dọc */
    text-align: center; /* Căn giữa nội dung tiêu đề cột */
}

/* Bo tròn góc cho ô đầu và cuối của header */
.device-table thead th:first-child { border-top-left-radius: 8px; }
.device-table thead th:last-child { border-top-right-radius: 8px; border-right: none; }

/* Xử lý cho header dính (sticky) có nhiều dòng */
.device-table .sticky-header-second-row th {
    position: sticky; /* Thêm thuộc tính này để hàng thứ hai cũng được "dính" lại */
    top: var(--header-row1-height, 28px); /* Tự động tính toán vị trí, 28px là giá trị dự phòng */
    z-index: 0; /* Đảm bảo các ô rowspan=2 của dòng 1 nằm trên */
}

/* Bỏ đường kẻ dọc cho cột cuối cùng */
.device-table td:last-child {
    border-right: none;
}

.device-table tbody tr {
    background-color: #fff;
    transition: background-color 0.2s ease;
}

.device-table .col-stt { width: 3%; } /* Cột Số thứ tự */
.device-table .col-topic { width: 10%; } /* Cột Chủ đề/Môn học */
.device-table .col-name { width: 20%; font-weight: 500; } /* Cột Tên thiết bị/danh mục */
.device-table th.col-purpose { width: 10%; } /* Cột Mục đích sử dụng (Tăng lên 20%) */
.device-table td.col-purpose {
    text-align: justify;
}
.device-table th.col-description {
    width: 40%; /* Cột Mô tả (phần tiêu đề) */
}
.device-table td.col-description {
    width: 40%; /* Cột Mô tả (phần nội dung) */
    white-space: pre-wrap; /* Cho phép xuống dòng trong ô mô tả */
    word-break: break-word; /* Tự động ngắt từ nếu quá dài */
    max-width: 300px; /* Giới hạn chiều rộng tối đa */
    overflow: hidden; /* Ẩn phần bị tràn */
    text-overflow: ellipsis; /* Hiển thị dấu "..." */
    text-align: justify; /* Căn đều nội dung mô tả cho dễ đọc */
}

.device-table .col-unit { width: 3%; } /* Cột Đơn vị tính */
.device-table .col-quota { width: 3%; } /* Cột Định mức */
.device-table .col-quantity { width: 3%; } /* Cột Số lượng */
.device-table .col-broken { width: 3%; } /* Cột Hỏng */
.device-table .col-actions { width: 5%; } /* Cột Hành động (sửa, xóa) */


/* --- NEW: Category Row Specific Styles --- */
.device-table .category-row {
    background-color: var(--surface-subtle-bg); /* Màu nền giống header để nổi bật */
    font-weight: 600; /* Chữ đậm */
}

.device-table .category-row:hover {
    background-color: var(--border-color);
}

.device-table .category-row .item-link {
    cursor: pointer;
    color: var(--primary-color);
    text-decoration: none;
    transition: text-decoration 0.2s;
}

.device-table .category-row:hover .item-link {
    text-decoration: underline;
}

.device-table .category-row .category-subject-tag {
    font-weight: 400;
    font-size: 0.8rem;
    color: var(--text-light);
    margin-left: 8px;
}

/* --- NEW: Parent Category Row Style --- */
.device-table .parent-category-row {
    background-color: var(--border-color);
    border-bottom: 2px solid var(--primary-color-light); /* Đường viền dưới để tách biệt với danh sách con */
}
.device-table .parent-category-row .item-name-cell {
    color: var(--primary-color-dark); /* Màu chữ đậm hơn */
}

/* --- Nút hành động trong bảng --- */
.item-actions {
    display: flex;
    justify-content: flex-end;
}

/* --- Bulk Import Preview Table --- */
.preview-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85rem;
}

.preview-table th, .preview-table td {
    border: 1px solid var(--border-color);
    padding: 8px;
    vertical-align: middle; /* Căn giữa theo chiều dọc */
}

.preview-table thead th {
    background-color: var(--surface-subtle-bg);
    font-weight: 600;
}

.preview-table tbody tr.has-error {
    background-color: var(--danger-light);
    text-decoration: line-through;
    color: var(--text-light);
}

/* Căn giữa nội dung các cột, ngoại trừ các cột có nội dung dài */
.preview-table td {
    text-align: center;
}

/* Căn đều cho các cột có nội dung dài để dễ đọc */
.preview-table td:nth-child(3), /* Cột Tên */
.preview-table td:nth-child(4), /* Cột Mục đích */
.preview-table td:nth-child(5) { /* Cột Mô tả */
    text-align: justify;
}

/* --- Cải tiến giao diện Modal Thiết bị --- */

/* Grid layout cho form thiết bị để tối ưu không gian */
.device-form-grid {
    display: grid; 
    grid-template-columns: 1fr 1fr; 
    gap: 15px 20px;
}

/* Ghi đè cho các input/select/textarea để chúng chiếm toàn bộ chiều rộng của container */
.device-form-grid .form-control,
.device-form-grid .filter-select {
    width: 100%;
    /* width: 100% is handled by .form-control in shared-layout.css */
}

/* Cải tiến checkbox group */
.checkbox-group-container {
    grid-column: span 2; /* Chiếm 2 cột */
    border: 1px solid var(--border-color);
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.checkbox-item {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
}

/* --- NEW: Styles for dynamically added action buttons --- */
.add-item-row td {
    padding: 10px;
    text-align: center;
    border-bottom: 1px solid var(--border-color);
}

.btn-add-in-list {
    /* Kế thừa một phần từ .btn-primary nhưng có tùy chỉnh */
    padding: 8px 15px;
    font-size: 0.9rem;
    font-weight: 600;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    text-decoration: none;
    /* Tùy chỉnh riêng */
    color: var(--primary-color);
    background-color: var(--primary-light);
    border: 1px dashed var(--primary-color);
}

.btn-add-in-list:hover {
    background-color: var(--primary-color);
    color: var(--text-on-primary);
    border-style: solid;
}
